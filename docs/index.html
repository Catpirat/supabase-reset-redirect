<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Procesando reset password...</title>
    <script>
      window.onload = () => {
        try {
          const url = new URL(window.location.href);
          const token = url.searchParams.get("token");
          const type = url.searchParams.get("type");
          const redirectTo = "caparazonemocional://reset-password";

          if (type === "recovery" && token) {
            const deepLink = `${redirectTo}#access_token=${token}`;
            document.body.innerHTML = `<p>Redirigiendo...</p>
                                      <p><a href="${deepLink}">${deepLink}</a></p>`;
            window.location.href = deepLink;
          } else {
            document.body.innerHTML = "<h2>Error: token inv치lido o falta par치metro</h2>";
          }
        } catch (err) {
          document.body.innerHTML = "<h2>Error procesando la redirecci칩n</h2><p>" + err + "</p>";
        }
      };
    </script>

  </head>
  <body>
    <h2>Procesando redirecci칩n...</h2>
    <p>Si no pasa nada, abre la app manualmente.</p>
  </body>
</html>
